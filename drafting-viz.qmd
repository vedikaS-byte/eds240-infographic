---
title: "drafting-viz"
format: html
---

### **III. Some pre-planning**

**Before you start drafing your viz, answer the following questions:**

-   **1.** Restate the questions you hope to answer with your inforgraphic. This should include *one overarching question* (think of this as driving the overall theme of your infographic) and *at least three subquestions* (each of which will be addressed by your infographic’s component visualizations). Have these questions changed at all since FPM #1? If yes, how so?

    -   This infographic aims to explore the audio and genre characteristics that distinguish high popularity songs from low popularity songs on Spotify. Essentially, the goal is to identify patterns that explictly define a "hit". The overarching question in mind is: What makes a song a Spotify hit? This will be addressed with three subquestions:

        -   Are hits emotionally different from non-hits?

        -   Do hit songs have a signature sound based on certain energy-danceability combinations?

        -   Which genres are most likely to produce a hit?

    -   While the overarching theme has remained consistent, both the first and second subquestions have changed. Originally, my first subquestion was framed as "are hit songs happier?", which implied a yes/no answer. I reframed this approach to focus on emotion difference between the two popularity groups (high vs low popularity) more broadly to better reflect what the valence (emotional) distribution actually shows. The second question was also initially one-sided which asked only whether popular songs cluster in the energy-danceability space. I refined this question to explicitly compare high and low popularity groups since I wanted to specifically determine WHERE hits cluster compared to non-hits.

**2.** Explain which variables from your data set(s) you will use to answer the above questions, and how.

-   

**3.** In [FPM #2](https://eds-240-data-viz.github.io/course-materials/assignments/FPM2.html), you created some exploratory data viz to better understand your data. You may already have some ideas of how you plan to formally visualize your data, but it’s *incredibly* helpful to look at visualizations by other creators for inspiration. Find *at least two* data visualizations that you could (potentially) borrow / adapt pieces from. Download and embed them into your `drafting-viz.qmd` file, and explain which elements you might borrow (e.g. the graphic form, legend design, layout, etc.).

### **IV. Hand-draw your anticipated visualizations**

**Before you begin coding, it’s a super useful practice to sketch out your anticipated visualizations by hand.** This [Medium article](https://medium.com/@tjanmichela/the-importance-of-sketching-in-data-visualization-78320c62e403) does a great job summarizing why this step matters.

-   Hand-draw your anticipated visualizations, then take a photo of your drawing(s) and embed it in your rendered `drafting-viz.qmd` file – **note** that these are not *exploratory* visualizations, but rather your plan for your final visualizations that you will eventually polish and include in your infographic.

### Recreate your hand-drawn visualizations using code Mock up all of your hand drawn visualizations using code. We understand that you will continue to iterate on these into FPM #4 (particularly after receiving feedback), but by the end of FPM #3, you should:

have your data plotted (if you’re experimenting with a graphic form(s) that was not explicitly covered in class, we understand that this may take some more time to build; you should have as much put together as possible) use appropriate strategies to highlight / focus attention on a clear message include appropriate text such as titles, captions, axis labels (note: you may eventually convert some text, such as titles and captions, into annotations or text elements on your infographic; it’s still helpful to include titles, etc. on these stand-alone visualizations now, to provide your peer reviewers and instructional team with necessary context) experiment with colors and typefaces / fonts create a presentable / aesthetically-pleasing theme (e.g. (re)move gridlines / legends as appropriate, adjust font sizes, etc.)

```{r}
# Calculate: What % of songs IN THIS GENRE are hits?
genre_hits %>%
  ggplot(aes(x = reorder(playlist_genre, percent_hit_genre), y = percent_hit_genre)) +
  # Draw the "stick"
  geom_segment(aes(xend = reorder(playlist_genre, percent_hit_genre), yend = 0), color = "grey50") +
  # Draw the "candy"
  geom_point(size = 4, color = "#1DB954") + # Spotify green
  coord_flip() +
  labs(title = "Lollipop: Genre Dominance in Hits", x = "", y = "Share of Total Hits (%)") +
  theme_minimal()
```

```{r}
library(ggplot2)
library(ggthemes)

# spotify_clean %>%
#   ggplot(aes(x = energy, y = danceability)) +
#   # Use filled density to see peaks clearly
#   geom_density_2d_filled(alpha = 0.8) + 
#   facet_wrap(~popularity_group) +
#   labs(
#     title = "Where do popular songs live?",
#     subtitle = "Higher density areas indicate song clusters",
#     x = "Energy",
#     y = "Danceability",
#     fill = "Density Level"
#   ) +
#   theme_minimal() +
#   theme(legend.position = "bottom")

# Of all the songs within a single genre, what percentage are hits? If a song is released in a specific genre, what are the odds (percent chance) that it will become a High Popularity hit? **Which genres are best at pushing their hits into the top 33% of Spotify's most popular songs?**
spotify_clean %>%
  count(playlist_genre, popularity_group) %>%
  group_by(playlist_genre) %>%
  mutate(prop = n / sum(n) * 100) %>%
  ggplot(aes(x = prop, y = reorder(playlist_genre, prop), color = popularity_group)) +
  # Add a dashed reference line at the 33.3% mark
  geom_vline(xintercept = 33.3, linetype = "dashed", color = "red", alpha = 0.5) +
  geom_line(aes(group = playlist_genre), color = "grey") + 
  geom_point(size = 3) +
  labs(
    title = "Genre Success of Spotify's Popular Songs into Top-Tier Hits",
    subtitle = "Dashed line indicates expected 33% distribution",
    x = "Percentage of Genre's Songs (%)", 
    y = "",
    caption = "Data: Solomon Ameh's 'Spotify Music Dataset' obtained from Kaggle.",
    color = "Popularity Tier"
  ) +
  theme_calc()


## Are the highest-popularity tier tracks generally happier? 
# Calculate the mean valence for each group to add as a reference line
valence_means <- spotify_clean %>%
  group_by(popularity_group) %>%
  summarise(mean_val = mean(valence, na.rm = TRUE))

spotify_clean %>%
  ggplot(aes(x = valence, fill = popularity_group)) +
  # Overlaid density with transparency
  geom_density(alpha = 0.4, color = "white") +
  # Add vertical lines for the means of each group
  geom_vline(data = valence_means, aes(xintercept = mean_val, color = popularity_group), 
             linetype = "dashed", size = 1, show.legend = FALSE) +
  scale_fill_manual(values = c("High Popularity" = "#E41A1C", 
                                "Mid Popularity" = "#377EB8", 
                                "Lower Popularity" = "#4DAF4A")) +
  scale_color_manual(values = c("High Popularity" = "#E41A1C", 
                                 "Mid Popularity" = "#377EB8", 
                                 "Lower Popularity" = "#4DAF4A")) +
  labs(
    title = "The Happiness Profile of Hits",
    subtitle = "Dashed lines represent the mean valence for each popularity tier",
    x = "Valence Score (0 = Sad, 1 = Happy)",
    y = "Density",
    fill = "Popularity Group"
  ) +
  theme_minimal() +
  theme(legend.position = "top")
```

### **VI. Answer a few last questions about your work and progress**

-   **1.** What are the key insights you want your infographic to communicate, and how will your design choices help highlight and support those messages?

-   **2.** What challenges did you encounter or anticipate encountering as you continue to build / iterate on your visualizations in R? If you struggled with mocking up any of your three visualizations, describe those challenges here.

-   **3.** What ggplot extension tools / packages do you need to use to build your visualizations? Are there any that we haven’t covered in class that you’ll be learning how to use for your visualizations?

-   **4.** What feedback do you need from the instructional team and / or your peers to ensure that your intended message and key insights are clear?
